<Window x:Class="DeskGrid.Views.UrlPortalWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Bookmarks"
        Width="280" Height="350"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ResizeMode="CanResizeWithGrip"
        ShowInTaskbar="False">

    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
        
        <Style x:Key="HeaderButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Background="{TemplateBinding Background}" CornerRadius="4" Padding="4">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#30FFFFFF"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Border x:Name="MainBorder"
            Background="#E0181825"
            BorderBrush="#40FFFFFF"
            BorderThickness="1"
            CornerRadius="8">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="32"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <Border x:Name="HeaderBorder"
                    Grid.Row="0"
                    Background="#40FFFFFF"
                    CornerRadius="8,8,0,0"
                    MouseLeftButtonDown="Header_MouseLeftButtonDown"
                    MouseMove="Header_MouseMove"
                    MouseLeftButtonUp="Header_MouseLeftButtonUp">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock x:Name="TitleText"
                               Grid.Column="0"
                               Text="{Binding Title}"
                               Foreground="White"
                               FontSize="13"
                               FontWeight="SemiBold"
                               VerticalAlignment="Center"
                               Margin="12,0,0,0"/>

                    <StackPanel Grid.Column="1" Orientation="Horizontal" Margin="0,0,4,0">
                        <Button Width="24" Height="24"
                                Click="AddBookmark_Click"
                                Style="{StaticResource HeaderButtonStyle}"
                                ToolTip="Add Bookmark">
                            <TextBlock Text="+" FontSize="16" Foreground="#AAAAAA"/>
                        </Button>
                        <Button Width="24" Height="24"
                                Click="CloseButton_Click"
                                Style="{StaticResource HeaderButtonStyle}"
                                ToolTip="Close">
                            <TextBlock Text="âœ•" FontSize="12" Foreground="#AAAAAA"/>
                        </Button>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Bookmarks List -->
            <ListBox x:Name="BookmarksList"
                     Grid.Row="1"
                     ItemsSource="{Binding Bookmarks}"
                     Background="Transparent"
                     BorderThickness="0"
                     Padding="8"
                     ScrollViewer.HorizontalScrollBarVisibility="Disabled">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Border Background="#20FFFFFF" CornerRadius="6" Padding="10,8" Margin="0,2"
                                Cursor="Hand" MouseLeftButtonDown="Bookmark_Click">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="24"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="ðŸ”—" FontSize="14" VerticalAlignment="Center"/>
                                <StackPanel Grid.Column="1" Margin="8,0,0,0">
                                    <TextBlock Text="{Binding Title}" Foreground="White" FontSize="12" FontWeight="Medium"/>
                                    <TextBlock Text="{Binding Url}" Foreground="#888888" FontSize="10" 
                                               TextTrimming="CharacterEllipsis"/>
                                </StackPanel>
                                <Button Grid.Column="2" Content="âœ•" FontSize="10" Foreground="#666666"
                                        Background="Transparent" BorderThickness="0"
                                        Click="RemoveBookmark_Click" Tag="{Binding}"
                                        Visibility="Collapsed" x:Name="RemoveBtn"/>
                            </Grid>
                        </Border>
                        <DataTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="RemoveBtn" Property="Visibility" Value="Visible"/>
                            </Trigger>
                        </DataTemplate.Triggers>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>

            <!-- Empty State -->
            <TextBlock Grid.Row="1"
                       Text="Click + to add bookmarks"
                       Foreground="#666666"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center"
                       Visibility="{Binding HasNoBookmarks, Converter={StaticResource BoolToVisibilityConverter}}"/>
        </Grid>
    </Border>
</Window>
